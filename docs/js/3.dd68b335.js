(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0759":function(t,l,e){"use strict";e.r(l);var h=function(){var t=this,l=t.$createElement,e=t._self._c||l;return e("q-layout",{attrs:{view:"hHh Lpr lFf"}},[e("q-header",{attrs:{elevated:""}},[e("q-toolbar",[e("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(l){t.leftDrawerOpen=!t.leftDrawerOpen}}}),e("q-toolbar-title",[t._v(" Lesson Editor ")])],1)],1),e("q-drawer",{ref:"drawer",attrs:{overlay:"",bordered:"",breakpoint:500,persist:"","content-class":"bg-primary text-white"},on:{mouseout:t.mouseOutofDrawer},model:{value:t.leftDrawerOpen,callback:function(l){t.leftDrawerOpen=l},expression:"leftDrawerOpen"}},[e("q-list",[t.loggedIn?e("q-item",{attrs:{clickable:""},on:{click:function(l){t.openHymn=!0}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"folder_open"}})],1),e("q-item-section",[e("q-item-label",[t._v("Open Hymn")])],1)],1):t._e(),e("q-separator"),t.loggedIn?e("q-item",{attrs:{clickable:""},on:{click:t.logout}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"logout"}})],1),e("q-item-section",[e("q-item-label",[t._v("Log out")])],1)],1):t._e(),t.loggedIn?t._e():e("q-item",{attrs:{clickable:""},on:{click:function(l){t.loginDialog=!0}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"login"}})],1),e("q-item-section",[e("q-item-label",[t._v("Log in")])],1)],1)],1)],1),e("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:t.openHymn,callback:function(l){t.openHymn=l},expression:"openHymn"}},[e("q-card",[e("q-card-section",{staticClass:"q-pt-md text-center text-h6"},[t._v("\n        Open Hymn\n        "),e("q-separator")],1),e("q-card-section",[e("div",[e("q-list",[e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"missing"},on:{input:t.changedLessonType},model:{value:t.lessonType,callback:function(l){t.lessonType=l},expression:"lessonType"}})],1),e("q-item-section",[e("q-item-label",[t._v("Missing")]),e("q-item-label",{attrs:{caption:""}},[t._v("Lessons in\n                  "),e("a",{attrs:{href:"https://github.com/GospelSounders/all-pdf-lessons-in-pdf",target:"_blank"}},[t._v("pdf format")]),t._v("\n                  which have not been uploaded to\n                  "),e("a",{attrs:{href:"https://sabbathschool.gospelsounders.org/1888-1890/1890/quarter4",target:"_blank"}},[t._v("the site.")])])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"existing"},on:{input:t.changedLessonType},model:{value:t.lessonType,callback:function(l){t.lessonType=l},expression:"lessonType"}})],1),e("q-item-section",[e("q-item-label",[t._v("Existing")]),e("q-item-label",{attrs:{caption:""}},[t._v("Lessons in which have been uploaded to\n                  "),e("a",{attrs:{href:"https://sabbathschool.gospelsounders.org/1888-1890/1890/quarter4",target:"_blank"}},[t._v("the site.")])])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[e("q-item-section",{attrs:{avatar:""}},[e("q-radio",{attrs:{val:"all"},on:{input:t.changedLessonType},model:{value:t.lessonType,callback:function(l){t.lessonType=l},expression:"lessonType"}})],1),e("q-item-section",[e("q-item-label",[t._v("All")]),e("q-item-label",{attrs:{caption:""}},[t._v("All Hymns available in \n                  "),e("a",{attrs:{href:"https://github.com/GospelSounders/christ-in-song-pdfs/tree/master/splitFiles",target:"_blank"}},[t._v("pdf format.")])])],1)],1)],1)],1)]),e("q-card-section",[e("q-form",{staticClass:"q-gutter-md text-white",on:{submit:t.onSubmitOpenHymn,reset:t.onResetgtKey}},[e("q-select",{attrs:{clearable:"","use-input":"",filled:"",options:t.lessonsToOpen,label:"File","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please select file"}]},on:{filter:t.filterFn},model:{value:t.selectedHymn,callback:function(l){t.selectedHymn=l},expression:"selectedHymn"}}),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),e("q-btn",{attrs:{flat:"",label:"Ok",color:"primary",type:"submit"}})],1)],1)],1)],1)],1),e("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:t.loginDialog,callback:function(l){t.loginDialog=l},expression:"loginDialog"}},[e("q-card",[e("q-card-section",{staticClass:"q-pt-none text-center text-h6"},[t._v("\n        Enter Key\n      ")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-form",{staticClass:"q-gutter-md text-white",on:{submit:t.onSubmitgtKey,reset:t.onResetgtKey}},[e("q-input",{attrs:{filled:"",type:"password",label:"Github Key","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please enter your key"}],"error-message":t.gtKeyErrorMessage},model:{value:t.gkKey,callback:function(l){t.gkKey=l},expression:"gkKey"}}),e("div",{staticClass:"float-right"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),e("q-btn",{attrs:{flat:"",label:"Ok",type:"submit",color:"primary"}})],1)],1)],1)],1)],1),e("q-page-container",[e("q-page",{staticClass:"full-height"},[e("iframe",{ref:"pageEditor",staticStyle:{width:"100%",position:"absolute",height:"100%",border:"0px"},attrs:{src:"/#/blank"}})]),e("q-page",{staticClass:"full-height"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pageEditorText,expression:"pageEditorText"}],ref:"pageEditorText",staticStyle:{width:"100%",position:"absolute",height:"100%",border:"0px"},domProps:{value:t.pageEditorText},on:{input:function(l){l.target.composing||(t.pageEditorText=l.target.value)}}})]),e("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[e("q-fab",{ref:"fabs",attrs:{"vertical-actions-align":"right",color:"secondary",glossy:"",icon:"keyboard_arrow_up",direction:"up"}},[e("q-fab-action",{attrs:{"label-position":"left",label:"Delete Page"},on:{click:t.deletePage}}),e("q-fab-action",{attrs:{"label-position":"left",label:"Detect Paragraphs"},on:{click:t.detectParagraphs}}),e("q-fab-action",{attrs:{"label-position":"left",label:"Delete Headers"},on:{click:t.deleteHeaders}})],1)],1),e("q-page-sticky",{attrs:{position:"bottom-left",offset:[18,18]}},[e("q-btn",{attrs:{round:"",color:"primary",icon:"save"},on:{click:t.saveExtractedFile}})],1),e("q-page-sticky",{attrs:{position:"right",offset:[18,18]}},[e("q-btn",{attrs:{round:"",color:"primary",icon:"navigate_next"},on:{click:t.gotoNextPage}})],1),e("q-page-sticky",{attrs:{position:"left",offset:[18,18]}},[e("q-btn",{attrs:{round:"",color:"primary",icon:"navigate_before"},on:{click:t.gotoPreviousPage}})],1)],1)],1)},m=[],n=e("70a8"),a=n["a"],s=e("2877"),i=e("4d5a"),o=e("e359"),r=e("65c6"),c=e("9c40"),g=e("6ac5"),p=e("9404"),d=e("1c1c"),u=e("66e5"),f=e("4074"),y=e("0016"),b=e("0170"),q=e("eb85"),v=e("24e8"),w=e("f09f"),x=e("a370"),k=e("3786"),C=e("0378"),H=e("ddd8"),T=e("4b7e"),E=e("27f9"),O=e("09e3"),$=e("9989"),L=e("de5e"),P=e("c294"),S=e("72db"),N=e("714f"),B=e("7f67"),_=e("eebe"),I=e.n(_),R=Object(s["a"])(a,h,m,!1,null,null,null);l["default"]=R.exports;I()(R,"components",{QLayout:i["a"],QHeader:o["a"],QToolbar:r["a"],QBtn:c["a"],QToolbarTitle:g["a"],QDrawer:p["a"],QList:d["a"],QItem:u["a"],QItemSection:f["a"],QIcon:y["a"],QItemLabel:b["a"],QSeparator:q["a"],QDialog:v["a"],QCard:w["a"],QCardSection:x["a"],QRadio:k["a"],QForm:C["a"],QSelect:H["a"],QCardActions:T["a"],QInput:E["a"],QPageContainer:O["a"],QPage:$["a"],QPageSticky:L["a"],QFab:P["a"],QFabAction:S["a"]}),I()(R,"directives",{Ripple:N["a"],ClosePopup:B["a"]})},"08ca":function(t){t.exports=JSON.parse('["1.html","10.html","100.html","101.html","102.html","103.html","104.html","105.html","106.html","107.html","108.html","109.html","11.html","110.html","111.html","112.html","113.html","114.html","115.html","116.html","117.html","118.html","119.html","12.html","120.html","121.html","122.html","123.html","124.html","125.html","126.html","127.html","128.html","129.html","13.html","130.html","131.html","132.html","133.html","134.html","135.html","136.html","137.html","138.html","139.html","14.html","140.html","141.html","142.html","143.html","144.html","145.html","146.html","147.html","148.html","149.html","15.html","150.html","151.html","152.html","153.html","154.html","155.html","156.html","157.html","158.html","159.html","16.html","160.html","161.html","162.html","163.html","164.html","165.html","166.html","167.html","168.html","169.html","17.html","170.html","171.html","172.html","173.html","174.html","175.html","176.html","177.html","178.html","179.html","18.html","180.html","181.html","182.html","183.html","184.html","185.html","186.html","187.html","188.html","189.html","19.html","190.html","191.html","192.html","193.html","194.html","195.html","196.html","197.html","198.html","199.html","2.html","20.html","200.html","201.html","202.html","203.html","204.html","205.html","206.html","207.html","208.html","209.html","21.html","210.html","211.html","212.html","213.html","214.html","215.html","216.html","217.html","218.html","219.html","22.html","220.html","221.html","222.html","223.html","224.html","225.html","226.html","227.html","228.html","229.html","23.html","230.html","231.html","232.html","233.html","234.html","235.html","236.html","237.html","238.html","239.html","24.html","240.html","241.html","242.html","243.html","244.html","245.html","246.html","247.html","248.html","249.html","25.html","250.html","251.html","252.html","253.html","254.html","255.html","256.html","257.html","258.html","259.html","26.html","260.html","261.html","262.html","263.html","264.html","265.html","266.html","267.html","268.html","269.html","27.html","270.html","271.html","272.html","273.html","274.html","275.html","276.html","277.html","278.html","279.html","28.html","280.html","281.html","282.html","283.html","284.html","285.html","286.html","287.html","288.html","289.html","29.html","290.html","291.html","292.html","293.html","294.html","295.html","296.html","297.html","298.html","299.html","3.html","30.html","300.html","301.html","302.html","303.html","304.html","305.html","306.html","307.html","308.html","309.html","31.html","310.html","311.html","312.html","313.html","314.html","315.html","316.html","317.html","318.html","319.html","32.html","320.html","321.html","322.html","323.html","324.html","325.html","326.html","327.html","328.html","329.html","33.html","330.html","331.html","332.html","333.html","334.html","335.html","336.html","337.html","338.html","339.html","34.html","340.html","341.html","342.html","343.html","344.html","345.html","346.html","347.html","348.html","349.html","35.html","350.html","351.html","352.html","353.html","354.html","355.html","356.html","357.html","358.html","359.html","36.html","360.html","361.html","362.html","363.html","364.html","365.html","366.html","367.html","368.html","369.html","37.html","370.html","371.html","372.html","373.html","374.html","375.html","376.html","377.html","378.html","379.html","38.html","380.html","381.html","382.html","383.html","384.html","385.html","386.html","387.html","388.html","39.html","390.html","391.html","392.html","393.html","394.html","395.html","396.html","397.html","398.html","399.html","4.html","40.html","400.html","401.html","402.html","403.html","404.html","405.html","406.html","407.html","408.html","409.html","41.html","410.html","411.html","412.html","413.html","414.html","415.html","416.html","417.html","418.html","419.html","42.html","420.html","421.html","422.html","423.html","424.html","425.html","426.html","427.html","428.html","429.html","43.html","430.html","431.html","432.html","433.html","434.html","435.html","436.html","437.html","438.html","439.html","44.html","440.html","441.html","442.html","443.html","444.html","445.html","446.html","447.html","448.html","449.html","45.html","450.html","451.html","452.html","453.html","454.html","455.html","456.html","457.html","458.html","459.html","46.html","460.html","461.html","462.5.html","462.html","463.html","464.html","465.html","466.html","467.html","468.html","469.html","47.html","470.html","471.html","472.html","473.html","474.html","475.html","476.html","477.html","478.html","479.html","48.html","480.html","481.html","482.html","483.html","484.html","485.html","486.html","487.html","488.html","489.html","49.html","490.html","491.html","492.html","493.html","494.html","495.html","496.html","497.html","498.html","499.html","5.html","50.html","500.html","501.html","502.html","503.html","504.html","505.html","506.html","507.html","508.html","509.html","51.html","510.html","511.html","512.html","513.html","514.html","515.html","516.html","517.html","518.html","519.html","52.html","520.html","521.html","522.html","523.html","524.html","525.html","526.html","527.html","528.html","529.html","53.html","530.html","531.html","532.html","533.html","534.html","535.html","536.html","537.html","538.html","539.html","54.html","540.html","541.html","542.html","543.html","544.html","545.html","546.html","547.html","548.html","549.html","55.html","550.html","551.html","552.html","553.html","554.html","555.html","556.html","557.html","558.html","559.html","56.html","560.html","561.html","562.html","563.html","564.html","565.html","566.html","567.html","568.html","569.html","57.html","570.html","571.html","572.html","573.html","574.html","575.html","576.html","577.html","578.html","579.html","58.html","580.html","581.html","582.html","583.html","584.html","585.html","586.html","587.html","588.html","589.html","59.html","590.html","591.html","592.html","593.html","594.html","595.html","596.html","597.html","598.html","599.html","6.html","60.html","600.html","601.html","602.html","603.html","604.html","605.html","606.html","607.html","608.html","609.html","61.html","610.html","611.html","612.html","613.html","614.html","615.html","616.html","617.html","618.html","619.html","62.html","620.html","621.html","622.html","623.html","624.html","625.html","626.html","627.html","628.html","629.html","63.html","630.html","631.html","632.html","633.html","634.html","635.html","636.html","637.html","638.html","639.html","64.html","640.html","641.html","642.html","643.html","644.html","645.html","646.html","647.html","648.html","649.html","65.html","650.html","651.html","652.html","653.html","654.html","655.html","656.html","657.html","658.html","659.html","66.html","660.html","661.html","662.html","663.html","664.html","665.html","666.html","667.html","668.html","669.html","67.html","670.html","671.html","672.html","673.html","674.html","675.html","676.html","677.html","678.html","679.html","68.html","680.html","681.html","682.html","683.html","684.html","685.html","686.html","687.html","688.html","689.html","69.html","690.html","691.html","692.html","693.html","694.html","695.html","696.html","697.html","698.html","699.html","7.html","70.html","700.html","701.html","702.html","703.html","704.html","705.html","706.html","707.html","708.html","709.html","71.html","710.html","711.html","712.html","713.html","714.html","715.html","716.html","717.html","718.html","719.html","72.html","720.html","721.html","722.html","723.html","724.html","725.html","726.html","727.html","728.html","729.html","73.html","730.html","731.html","732.html","733.html","734.html","735.html","736.html","737.html","738.html","739.html","74.html","740.html","741.html","742.html","743.html","744.html","745.html","746.html","747.html","748.html","749.html","75.html","750.html","751.html","752.html","753.html","754.html","755.html","756.html","757.html","758.html","759.html","76.html","760.html","761.html","762.html","763.html","764.html","765.html","766.html","767.html","768.html","769.html","77.html","770.html","771.html","772.html","773.html","774.html","775.html","776.html","777.html","778.html","779.html","78.html","780.html","781.html","782.html","783.html","784.html","785.html","786.html","787.html","788.html","789.html","79.html","790.html","791.html","792.html","793.html","794.html","795.html","796.html","797.html","798.html","799.html","8.html","80.html","800.html","801.html","802.html","803.html","804.html","805.html","806.html","807.html","808.html","809.html","81.html","810.html","811.html","812.html","813.html","814.html","815.html","816.html","817.html","818.html","819.html","82.html","820.html","821.html","822.html","823.html","824.html","825.html","826.html","827.html","828.html","829.html","83.html","830.html","831.html","832.html","833.html","834.html","835.html","836.html","837.html","838.html","839.html","84.html","840.html","841.html","842.html","843.html","844.html","845.html","846.html","847.html","848.html","849.html","85.html","850.html","851.html","852.html","853.html","854.html","855.html","856.html","857.html","858.html","859.html","86.html","860.html","861.html","862.html","863.html","864.html","865.html","866.html","867.html","868.html","869.html","87.html","870.html","871.html","872.html","873.html","874.html","875.html","876.html","877.html","878.html","879.html","88.html","880.html","881.html","882.html","883.html","884.html","885.html","886.html","887.html","888.html","889.html","89.html","890.html","891.html","892.html","893.html","894.html","895.html","896.html","897.html","898.html","899.html","9.html","90.html","900.html","901.html","902.html","903.html","904.html","905.html","906.html","907.html","908.html","909.html","91.html","910.html","911.html","912.html","913.html","914.html","915.html","916.html","917.html","918.html","919.html","92.html","920.html","921.html","922.html","923.html","924.html","925.html","926.html","927.html","928.html","929.html","93.html","930.html","931.html","932.html","933.html","934.html","935.html","936.html","937.html","938.html","939.html","94.html","940.html","941.html","942.html","943.html","944.html","945.html","946.html","947.html","948.html","949.html","95.html","96.html","97.html","98.html","99.html"]')},"70a8":function(t,l,e){"use strict";(function(t){e("4e82"),e("e6cf"),e("ddb0"),e("5319");var h=e("cf57");const{Octokit:m}=e("1af2"),n=e("1712").to,a=e("bc3a"),s="GospelSounders",i="christ-in-song-pdfs",o="ch1941.adh",r=e("ff00"),c=e("08ca");l["a"]={name:"MainLayout",components:{},computed:{},created(){this.checkforCredentials(),this.getAllHymns(),this.getAllExistingHymns(),this.changedLessonType()},data(){return{lessonType:"missing",pageEditorText:"",lines:[],allElements:[],leftDrawerOpen:!1,openHymn:!0,loginDialog:!1,loggedIn:!1,gkKey:null,gtKeyErrorMessage:"",allHymns:[],existingLessons:[],existings:[],lessonsToOpen:[],allHymnsToOpen:[],lessonsToOpen:[],selectedHymn:""}},methods:{getCurrentPage(){let t,l=this.$refs.pageEditor.contentWindow.document,e=l.getElementsByClassName("pf");for(let m in e){try{if(e[m].getBoundingClientRect().top>=0){t=e[m];break}}catch(h){}}return t},getPageNumber(t){let l;console.log(t);for(let e in t.classList){let h=t.classList[e];if(h.match(/pc[0-9a-z]+/)){l=h;break}}return l=l.slice(2),l},getPageAnchor(t){let l=this.$refs.pageEditor.contentWindow.document,e=l.getElementsByTagName("a");for(let h in e)if(e[h].href.split("/").slice(-1)[0]===`#pf${t}`)return e[h]},removePageAnchor(t){let l=this.getPageAnchor(this.getPageNumber(t));l.parentNode.removeChild(l)},deleteHeaders(){let t=this.getCurrentPage();t=t.children[0];let l=[];for(let h in t.children){let e=t.children[h];l.push(e)}l=l.filter((t=>{try{return t.getBoundingClientRect(),t}catch(l){return!1}})),l=l.sort(((t,l)=>{t.getBoundingClientRect().x;let e=t.getBoundingClientRect().y,h=(l.getBoundingClientRect().x,l.getBoundingClientRect().y);return e-h}));let e=l[0];e.parentNode.removeChild(e);this.getPageNumber(t);this.$refs.fabs.show()},gotoNextPage(){let t=this.getCurrentPage();t=t.children[0];let l=this.getPageNumber(t),e=this.$refs.pageEditor.contentWindow.document,h=e.getElementsByTagName("a"),m=parseInt(l,16)+1;console.log(m),m=m.toString(16);for(let a in h)try{if(h[a].href.split("/").slice(-1)[0]===`#pf${m}`){h[a].click();break}}catch(n){}},gotoPreviousPage(){let t=this.getCurrentPage();t=t.children[0];let l=this.getPageNumber(t),e=this.$refs.pageEditor.contentWindow.document,h=e.getElementsByTagName("a"),m=parseInt(l,16)-1;m=m.toString(16);for(let a in h)try{if(h[a].href.split("/").slice(-1)[0]===`#pf${m}`){h[a].click();break}}catch(n){}},deletePage(){let t=this.getCurrentPage();this.removePageAnchor(t.children[0]),t.parentNode.removeChild(t);let l=this.getPageNumber(t.children[0]),e=parseInt(l,16);setTimeout((()=>{let t=this.$refs.pageEditor.contentWindow.document,h=t.getElementsByClassName("pc");for(let s in h){let t=h[s];for(let h in t.classList){let m=t.classList[h];if(m.match(/pc[0-9a-z]+/)){if(l=parseInt(m.slice(2),16),l>e){l--;let e="pc"+l.toString(16);t.classList.remove(m),t.classList.add(e),t.parentElement.setAttribute("data-page-no",l.toString(16)),t.parentElement.id="pf"+l.toString(16)}break}}}let m=t.getElementsByTagName("a");for(let s in m)try{let t=m[s].href.split("/").slice(-1)[0];if(t.match(/#pf[0-9a-z]+/)&&(l=parseInt(t.slice(3),16),l>e)){l--;let t=m[s].getAttribute("data-dest-detail");t=JSON.parse(t),t[0]--,m[s].setAttribute("data-dest-detail",JSON.stringify(t)),m[s].href="#pf"+l.toString(16),m[s].innerHTML="page"+l}}catch(a){}t=this.$refs.pageEditor.contentWindow.document;let n=this.$refs.pageEditor.contentWindow.document.documentElement.outerHTML;this.$refs.pageEditor.srcdoc=n}),1e3)},async getAllHymns(){return c},async getAllExistingHymns(t=!1){if(!window.localStorage.getItem("allExistingLessons")||t){let[t,l]=await n(a.get(`${r["CORS_PROXY"]}/https://sabbathschool.gospelsounders.org/sitemap.xml`));if(t)return!1;l=l.data;let e=l.match(/<loc>[^<]*<\/loc>/g),h={};e=e.filter((t=>t.match(/[0-9]{4}\/quarter[0-9]/))).map((t=>t.match(/[0-9]{4}\/quarter[0-9]/)[0])),e.map((t=>{void 0===h[t]?h[t]=1:h[t]+=1}));let m=[];for(let n in h)m.push([n,h[n]]);let s=m.filter((t=>t[1]>1)).map((t=>t[0]));window.localStorage.setItem("allExistingLessons",JSON.stringify(s))}return JSON.parse(window.localStorage.getItem("allExistingLessons"))},async changedLessonType(){return this.$q.loading.show({message:"Fetching List",backgroundColor:"grey",spinner:h["a"],customClass:"loader"}),new Promise((async(t,l)=>{new m({auth:this.loggedIn});let e=await this.getAllHymns();switch(this.allHymns=e.map((t=>(t=t.slice(0).replace(".html",""),t))),this.allHymns=this.allHymns.sort(((t,l)=>parseInt(t)-parseInt(l))),this.lessonType){case"all":this.allHymnsToOpen=this.allHymns;break;case"missing":let t=await this.getAllExistingHymns();this.allHymnsToOpen=this.allHymns.filter((l=>{let e=l,h=`${e.slice(0,4)}`,m=parseInt(`${l.slice(9,11)}`);return!t.includes(`${h}/quarter${m}`)}));break;case"existing":this.openHymn=!1,this.$q.notify({type:"negative",message:"Not yet implemented"});break}return this.$q.loading.hide(),t(!0)}))},clearBackground(){let t=this.$refs.pageEditor.contentWindow.document;for(let h=0;h<20;h++){let l=t.getElementsByTagName("img");for(let t in l){let h=l[t];try{h.parentNode.removeChild(h)}catch(e){}}}var l=document.createElement("style");l.type="text/css",l.innerHTML="\n              .bordered{\n              border: 1px solid green;\n              }\n              ",t.getElementsByTagName("head")[0].appendChild(l),this.detectLines()},joinLines(){let t=this.$refs.pageEditor.contentWindow.document,l=t.getElementsByClassName("pf"),e=[];for(let m in l)try{let t=l[m];t=t.children[0];let h=[];for(let l in t.children){let e=t.children[l];h.push(e)}h=h.filter((t=>{try{return t.getBoundingClientRect(),t}catch(l){return!1}})),h=h.sort(((t,l)=>{t.getBoundingClientRect().x;let e=t.getBoundingClientRect().y,h=(l.getBoundingClientRect().x,l.getBoundingClientRect().y);return e-h})),h.map((t=>e.push(t)))}catch(h){}this.allElements=e},detectLines(){this.detectLines_()},detectLines_(){this.joinLines(),this.pageEditorText="";let t=this.allElements,l=[],e=[];for(let h in t){let m=t[h];if(0===e.length)e.push(m);else{let t=e[e.length-1].getBoundingClientRect(),h=t.top-t.height,n=m.getBoundingClientRect(),a=n.top-n.height,s=t.height<n.height?t.height:n.height;if(Math.abs(h-a)<.5*s)e.push(m);else{e=e.sort(((t,l)=>{let e=t.getBoundingClientRect().x,h=(t.getBoundingClientRect().y,l.getBoundingClientRect().x);l.getBoundingClientRect().y;return e-h}));let t="";for(let l in e)t+=e[l].innerHTML;e[0].innerHTML=`${t}`,this.pageEditorText+=`\n${t.replace(/<[^>]+>/g,"")}`;for(let l in e)l>0&&e[l].parentNode.removeChild(e[l]);l.push(e),e=[],e.push(m)}}this.lines=l}},detectParagraphs(){this.detectLines(),window.abc=this.lines[0],console.log(this.lines[1]),console.log(this.lines[2]),console.log(this.lines[3]),console.log(this.lines[0].getBoundingClientRect().x),console.log(this.lines[1].getBoundingClientRect().x),console.log(this.lines[2].getBoundingClientRect().x),console.log(this.lines[3].getBoundingClientRect().x),console.log(this.lines[4].getBoundingClientRect().x)},filterFn(t,l){l(""!==t?()=>{const l=t.toLowerCase();this.lessonsToOpen=this.allHymnsToOpen.filter((t=>t.toLowerCase().indexOf(l)>-1))}:()=>{this.lessonsToOpen=this.allHymnsToOpen})},logout(){window.localStorage.removeItem("adhGitKey"),this.checkforCredentials()},async saveExtractedFile(){let l=this.pageEditorText.split("\n")[1];if(parseInt(l).toString()===l){l=l;while(l.length<3)l=`0${l}`}else l=this.selectedHymn;let e=`extracted/${l}`;const h=new m({auth:this.loggedIn});let a,[i,r]=await n(h.request(`GET /repos/${s}/${o}/contents/${e}`,{owner:s,repo:o,path:e}));i||(a=r.data.sha);let c={owner:s,repo:o,path:e,message:e,content:t.from(this.pageEditorText).toString("base64")};a&&(c.sha=a),[i,r]=await n(h.request(`PUT /repos/${s}/${o}/contents/${e}`,c))},async nextOriginalFile(){if(""===this.selectedHymn)this.selectedHymn="page1";else{let t=parseInt(this.selectedHymn.replace("page",""));t++,this.selectedHymn=`page${t}`}this.onSubmitOpenHymn()},async prevOriginalFile(){if(""===this.selectedHymn)this.selectedHymn="page1";else{let t=parseInt(this.selectedHymn.replace("page",""));t--,t<1&&(t=1),this.selectedHymn=`page${t}`}this.onSubmitOpenHymn()},async onSubmitOpenHymn(){return new Promise((async(t,l)=>{new m({auth:this.loggedIn});let e=`htmlFilesNoImages/${this.selectedHymn}.html`,[h,o]=await n(a.get(`https://raw.githubusercontent.com/${s}/${i}/master/${e}`));if(this.openHymn=!1,h)return t(!1);o=o.data,o=o.replace(";color:transparent",";color:black"),o=o.replace("{color:transparent","{color:black"),o=o.replace(".t{",".t{border:1px solid green;"),this.$refs.pageEditor.srcdoc=o,setTimeout((()=>{this.clearBackground()}),2e3)}))},onSubmitgtKey(){window.localStorage.setItem("adhGitKey",this.gkKey),this.checkforCredentials(),this.loginDialog=!1},onResetgtKey(){},checkforCredentials(){let t=window.localStorage.getItem("adhGitKey");this.loggedIn=t},mouseOutofDrawer(t){Math.abs(t.clientX-this.$refs.drawer.width)<5&&(this.leftDrawerOpen=!1)}}}}).call(this,e("b639").Buffer)},ff00:function(t){t.exports=JSON.parse('{"CORS_PROXY":"https://cors.cseco.co.ke"}')}}]);